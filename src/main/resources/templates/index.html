<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="~{fragments/header :: head(${title}, ${metaDescription}, null, null, null, null, null)}"></head>
<body>
<div class="container">
    <!-- Hero Section - Responsive Layout -->
    <div class="hero-section-responsive">
        <!-- Hero Content -->
        <div class="hero-content-responsive animate-slide-up">
            <p class="hero-eyebrow">Verdict-first salary comparison</p>
            <h1 class="hero-title">Reality-check your job move</h1>
            <p class="hero-description">
                Compare your actual buying power with taxes and cost of living. 
                Get a clear verdict: GO, CONDITIONAL, WARNING, or NO-GO.
            </p>
            
            <!-- Trust Badges -->
            <div class="trust-badges">
                <span class="trust-badge">üá∫üá∏ US-wide tax & cost data</span>
                <span class="trust-badge">üìä Real-time calculations</span>
                <span class="trust-badge">üîí Privacy-first</span>
            </div>
        </div>

        <!-- Input Card - Responsive Width -->
        <div class="form-card-responsive animate-slide-up delay-1">
            <form th:action="@{/}" method="get" id="mainForm">
                <!-- Step Indicator -->
                <div class="step-track">
                    <div class="step-dot active" data-step="1">1</div>
                    <div class="step-dot" data-step="2">2</div>
                    <div class="step-dot" data-step="3">3</div>
                </div>

                <!-- Step 1: Job & Cities -->
                <div class="step-group active" data-step="1">
                    <h3 style="margin-bottom: var(--space-xl); font-size: var(--text-2xl);">What's your role and cities?</h3>
                    
                    <div class="input-group">
                        <label class="input-label">Job Title</label>
                        <select name="job" id="jobSelect" class="minimal-select" required>
                            <option value="" disabled selected>Select a role</option>
                            <optgroup th:each="group : ${jobsByCategory.entrySet()}" th:label="${group.key}">
                                <option th:each="j : ${group.value}" th:value="${j.slug}" th:text="${j.title}"></option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">Current City</label>
                        <input name="cityA" id="cityAInput" class="minimal-input" list="cities" placeholder="san-francisco-ca" required>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">Offer City</label>
                        <input name="cityB" id="cityBInput" class="minimal-input" list="cities" placeholder="austin-tx" required>
                    </div>
                    
                    <button type="button" class="btn btn-primary btn-full" onclick="nextStep(2)" style="margin-top: var(--space-lg);">Continue ‚Üí</button>
                </div>

                <!-- Step 2: Salaries -->
                <div class="step-group" data-step="2">
                    <h3 style="margin-bottom: var(--space-xl); font-size: var(--text-2xl);">What are the salaries?</h3>
                    
                    <div class="input-group">
                        <label class="input-label">Current Salary</label>
                        <input type="number" name="currentSalary" id="currentSalaryInput" class="minimal-input" min="1000" max="10000000" step="1" placeholder="120000" required>
                        <small style="color: var(--text-tertiary); font-size: var(--text-xs); margin-top: var(--space-xs); display: block;">Enter any amount between $1,000 and $10,000,000</small>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">Offer Salary</label>
                        <input type="number" name="offerSalary" id="offerSalaryInput" class="minimal-input" min="1000" max="10000000" step="1" placeholder="135000" required>
                        <small style="color: var(--text-tertiary); font-size: var(--text-xs); margin-top: var(--space-xs); display: block;">Enter any amount between $1,000 and $10,000,000</small>
                    </div>
                    
                    <div class="step-buttons">
                        <button type="button" class="btn btn-secondary" onclick="prevStep(1)">‚Üê Back</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep(3)">Review ‚Üí</button>
                    </div>
                </div>

                <!-- Step 3: Review & Submit -->
                <div class="step-group" data-step="3">
                    <h3 style="margin-bottom: var(--space-xl); font-size: var(--text-2xl);">Review your comparison</h3>
                    
                    <div class="glass-card" style="margin-bottom: var(--space-xl); padding: var(--space-xl);">
                        <div style="display: grid; gap: var(--space-lg);">
                            <div>
                                <span class="hero-eyebrow">Job</span>
                                <p id="reviewJob" style="font-size: var(--text-xl); font-weight: 600; margin-top: var(--space-xs); color: var(--text-primary);">-</p>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-lg);">
                                <div>
                                    <span class="hero-eyebrow">Current</span>
                                    <p id="reviewCurrent" style="font-size: var(--text-xl); font-weight: 600; margin-top: var(--space-xs); color: var(--text-primary);">-</p>
                                </div>
                                <div>
                                    <span class="hero-eyebrow">Offer</span>
                                    <p id="reviewOffer" style="font-size: var(--text-xl); font-weight: 600; margin-top: var(--space-xs); color: var(--text-primary);">-</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-buttons">
                        <button type="button" class="btn btn-secondary" onclick="prevStep(2)">‚Üê Back</button>
                        <button type="submit" class="btn btn-primary">Get Verdict ‚Üí</button>
                    </div>
                </div>
            </form>

            <datalist id="cities">
                <option th:each="city : ${cities}" th:value="${city.slug}" th:text="${city.city + ', ' + city.state}"></option>
            </datalist>
        </div>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>

<script th:src="@{/js/main.js}"></script>
</body>
</html>
