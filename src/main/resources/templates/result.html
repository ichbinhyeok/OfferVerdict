<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title th:text="${title}">Verdict</title>
    <meta name="description" th:attr="content=${metaDescription}"/>
    <link rel="canonical" th:attr="href=${canonicalUrl}"/>
    <meta property="og:title" th:attr="content=${ogTitle}"/>
    <meta property="og:description" th:attr="content=${ogDescription}"/>
    <meta property="og:url" th:attr="content=${ogUrl}"/>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/verdict.css}">
    <link rel="stylesheet" th:href="@{/css/ads.css}">
</head>
<body>
<div class="container">
    <div id="topAdSlot"><!-- ADSENSE HERE --></div>

    <div class="alert error" th:if="${error}">
        <strong>Heads up:</strong>
        <span th:text="${error}">Salary is below the recommended minimum.</span>
    </div>

    <div th:class="'verdict-banner verdict-' + ${result.verdict.name().toLowerCase().replace('_','-')}">
        <div class="verdict-header">
            <div class="badge">
                <span th:text="${job.title}">Job</span>
                <strong th:text="${#numbers.formatDecimal(result.deltaPercent,1,1)} + '%'">Delta</strong>
            </div>
            <h1 th:text="${result.verdict}">GO</h1>
            <p class="verdict-copy" th:text="${result.verdictCopy}">Punchy copy</p>
        </div>

        <div class="residual-bars"
             th:with="maxResidual=${T(java.lang.Math).max(T(java.lang.Math).abs(result.current.residual), T(java.lang.Math).abs(result.offer.residual)) > 0 ? T(java.lang.Math).max(T(java.lang.Math).abs(result.current.residual), T(java.lang.Math).abs(result.offer.residual)) : 1}">
            <div class="bar-row">
                <div class="bar-label">
                    <span th:text="${cityA.city} + ' residual'">Current residual</span>
                    <strong th:text="${'$' + #numbers.formatDecimal(result.current.residual, 1, 0)}">$0</strong>
                </div>
                <div class="bar-track">
                    <div class="bar-fill current"
                         th:style="'width:' + ${T(java.lang.Math).max(8, (T(java.lang.Math).abs(result.current.residual) / maxResidual) * 100)} + '%';">
                    </div>
                </div>
            </div>
            <div class="bar-row">
                <div class="bar-label">
                    <span th:text="${cityB.city} + ' residual'">Offer residual</span>
                    <strong th:text="${'$' + #numbers.formatDecimal(result.offer.residual, 1, 0)}">$0</strong>
                </div>
                <div class="bar-track">
                    <div class="bar-fill offer"
                         th:style="'width:' + ${T(java.lang.Math).max(8, (T(java.lang.Math).abs(result.offer.residual) / maxResidual) * 100)} + '%';">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="meta-row">
            <span th:text="'From ' + ${cityA.city} + ', ' + ${cityA.state}"></span>
            <span>â†’</span>
            <span th:text="'To ' + ${cityB.city} + ', ' + ${cityB.state}"></span>
            <span class="pill muted" th:text="${householdType.name().toLowerCase()} + ' household'">single household</span>
            <span class="pill muted" th:text="${housingType.name().toLowerCase()} + ' housing'">rent housing</span>
        </div>

        <div class="cta-row" th:switch="${result.verdict}">
            <a class="cta" th:case="${T(com.offerverdict.model.Verdict).GO}" href="#moving">Book moving quotes</a>
            <a class="cta" th:case="${T(com.offerverdict.model.Verdict).CONDITIONAL}" href="#moving">Lock in apartment scouting</a>
            <a class="cta secondary" th:case="${T(com.offerverdict.model.Verdict).WARNING}" href="#negotiate">Use this to negotiate</a>
            <a class="cta secondary" th:case="${T(com.offerverdict.model.Verdict).NO_GO}" href="#budgeting">Grab a budgeting reset</a>
        </div>

        <details class="details" open>
            <summary>Details: net monthly, rent, living cost, residual</summary>
            <div class="grid">
                <div>
                    <h3 th:text="${cityA.city} + ' take-home'">City A</h3>
                    <table>
                        <tr><td>Net monthly</td><td th:text="${'$' + #numbers.formatDecimal(result.current.netMonthly, 1, 0)}"></td></tr>
                        <tr><td>Avg rent</td><td th:text="${'$' + #numbers.formatDecimal(result.current.rent, 1, 0)}"></td></tr>
                        <tr><td>Living cost baseline</td><td th:text="${'$' + #numbers.formatDecimal(result.current.livingCost, 1, 0)}"></td></tr>
                        <tfoot><tr><td>Residual</td><td th:text="${'$' + #numbers.formatDecimal(result.current.residual, 1, 0)}"></td></tr></tfoot>
                    </table>
                </div>
                <div>
                    <h3 th:text="${cityB.city} + ' take-home'">City B</h3>
                    <table>
                        <tr><td>Net monthly</td><td th:text="${'$' + #numbers.formatDecimal(result.offer.netMonthly, 1, 0)}"></td></tr>
                        <tr><td>Avg rent</td><td th:text="${'$' + #numbers.formatDecimal(result.offer.rent, 1, 0)}"></td></tr>
                        <tr><td>Living cost baseline</td><td th:text="${'$' + #numbers.formatDecimal(result.offer.livingCost, 1, 0)}"></td></tr>
                        <tfoot><tr><td>Residual</td><td th:text="${'$' + #numbers.formatDecimal(result.offer.residual, 1, 0)}"></td></tr></tfoot>
                    </table>
                </div>
            </div>
        </details>

        <div class="section-title" th:text="'Other ' + ${job.title} + ' salary comparisons'"></div>
        <ul class="related-list">
            <li th:each="link : ${otherJobLinks}">
                <a th:href="${link}" th:text="${link}"></a>
            </li>
        </ul>

        <div class="section-title" th:text="'Compare ' + ${cityA.city} + ' with other cities'"></div>
        <ul class="related-list">
            <li th:each="link : ${otherCityLinks}">
                <a th:href="${link}" th:text="${link}"></a>
            </li>
        </ul>

        <div id="bottomAdSlot"><!-- ADSENSE HERE --></div>
    </div>

    <div class="footer">
        Not financial or tax advice.
    </div>
</div>

<script type="application/ld+json" th:utext="${structuredDataJson}"></script>
</body>
</html>
